Profile
{
	name = KerbalismSupport
	modname = Rational Resources Parts
	moddir = RationalResourcesParts
	
	// Setup status alerts
	// Supply
	// {
		// resource = Uraninite
		// low_message = Uraninite is almost depleted on $VESSEL@<i>Enriched Uranium production will soon be unavailable</i>
		// empty_message = There is no more Uraninite on $VESSEL@<i>Enriched Uranium production is no longer available</i>
		// refill_message = $VESSEL Uraninite storage refilled@<i>Enriched Uranium production is available</i>
	// }
	
	// Define ISRU chains used by process controllers
	
	// - Standard converters
	Process
    {
        name = molten regolith electrolysis rock mode
        title = Molten Regolith Electrolysis (Rock)
		Tag = Sabe
        modifier = _MRER
        input = ElectricCharge@2.0
        input = Rock@0.000015855
        output = Oxygen@0.088843
        output = CarbonDioxide@0.00444215
        output = Shielding@0.000000112
        dump_valve = Shielding&CarbonDioxide,Shielding,Shielding&Oxygen,CarbonDioxide,Oxygen,CarbonDioxide&Oxygen
    }
	Process
	{
		name = Ammonia Brewer
		title = Ammonia Brewer
		Tag = RR
		modifier = _AmmoniaBrew
		input = ElectricCharge@30
		input = LqdHydrogen@0.8536
		input = LqdNitrogen@0.3396
		output = LqdAmmonia@0.4851
	}
	Process
	{
		name = Ammonia to MonoPropellant
		title = Ammonia to MonoPropellant
		Tag = RR
		modifier = _AmmoniaToMono
		input = ElectricCharge@30
		input = LqdAmmonia@0.4851
		output = MonoPropellant@0.0427
		output = LqdHydrogen@0.2845
		dump_valve = MonoPropellant,LqdHydrogen
	}
	Process
	{
		name = Carbon Extractor
		title = Carbon Extractor
		Tag = RR
		modifier = _CarbonExtractor
		input = ElectricCharge@30
		input = Ore@0.0601
		output = Carbon@0.1201
	}
	Process
	{
		name = Carbon Fuser
		title = Carbon Fuser
		Tag = RR
		modifier = _CarbonFuser
		input = ElectricCharge@30
		input = Carbon@0.024
		input = Oxygen@22.69504
		output = CarbonDioxide@22.5818
	}
	Process
	{
		name = Alumina Splitter
		title = Alumina Splitter
		Tag = RR
		modifier = _SplitterAl2O3
		input = ElectricCharge@30
		input = Alumina@0.2562
		output = Metal@0.1002
		output = Oxygen@113.4752
		dump_valve = Metal,Oxygen
	}
	Process
	{
		name = Carbon Dioxide Splitter
		title = Carbon Dioxide Splitter
		Tag = RR
		modifier = _SplitterCO2
		input = ElectricCharge@30
		input = CarbonDioxide@22.5818
		output = Oxygen@22.69504
		output = Carbon@0.024
		dump_valve = Carbon,Oxygen
	}
	Process
	{
		name = Spodumene Splitter
		title = Spodumene Splitter
		Tag = RR
		modifier = _SplitterSpod
		input = ElectricCharge@30
		input = Spodumene@0.06
		output = Lithium@0.013
		// output = Aluminum@0.0097
		output = Metal@0.00346
		output = Silicates@0.0609
		dump_valve = Lithium,Metal,Silicates,Lithium&Metal,Lithium&Silicates,Metal&Silicates
		
	}
	Process
	{
		name = Monazite Splitter
		title = Monazite Splitter
		Tag = RR
		modifier = _SplitterMona
		input = ElectricCharge@30
		input = Monazite@0.0468
		output = RareMetals@0.025
		output = Phosphorus@0.0062
		output = Oxygen@22.695
		dump_valve = RareMetals,Phosphorus,Oxygen,RareMetals&Phosphorus,RareMetals&Oxygen,Phosphorus&Oxygen
	}
	Process
	{
		name = Water Splitter
		title =  Water Splitter
		Tag = RR
		modifier = _SplitterH2O
		input = ElectricCharge@30
		input = Water@1.8
		output = Hydrogen@224.25
		output = Oxygen@113.48
		dump_valve = Hydrogen,Oxygen
	}
	Process
	{
		name = Hydrates Splitter
		title = Hydrates Splitter
		Tag = RR
		modifier = _SplitterHydrates
		input = ElectricCharge@30
		input = Hydrates@0.3014
		output = Water@0.1802
		output = XenonGas@0.0144
		output = ArgonGas@0.8957
		output = MetalOre@0.0129
		output = Oxygen@68.0851
		dump_valve = 		XenonGas&ArgonGas&MetalOre&Oxygen,Water&XenonGas&ArgonGas&MetalOre,XenonGas&ArgonGas&MetalOre,		Water&ArgonGas&MetalOre&Oxygen,Water&XenonGas&MetalOre&Oxygen,Water&XenonGas&ArgonGas&Oxygen
	}
	
	// - Compressor/Freezer converters
	Process
	{
		name = Freeze Ammonia
		title = Freeze Ammonia
		Tag = RR
		modifier = _FreezeNH3
		input = ElectricCharge@20
		input = Ammonia@221.47
		output = LqdAmmonia@0.24
	}
	Process
	{
		name = Freeze CarbonDioxide
		title = Freeze CarbonDioxide
		Tag = RR
		modifier = _FreezeCO2
		input = ElectricCharge@20
		input = CarbonDioxide@225.58
		output = LqdCO2@0.38
	}
	Process
	{
		name = Freeze Hydrogen
		title = Freeze Hydrogen
		Tag = RR
		modifier = _FreezeH2
		input = ElectricCharge@20
		input = Hydrogen@224.25
		output = LqdHydrogen@0.28
	}
	Process
	{
		name = Freeze Methane
		title = Freeze Methane
		Tag = RR
		modifier = _FreezeCH4
		input = ElectricCharge@20
		input = Methane@223.88
		output = LqdMethane@0.38
	}
	Process
	{
		name = Freeze Nitrogen
		title = Freeze Nitrogen
		Tag = RR
		modifier = _FreezeN2
		input = ElectricCharge@20
		input = Nitrogen@223.93
		output = LqdNitrogen@0.34
	}
	Process
	{
		name = Freeze Oxygen
		title = Freeze Oxygen
		Tag = RR
		modifier = _FreezeO2
		input = ElectricCharge@20
		input = Oxygen@226.95
		output = LqdOxygen@0.28
	}
	
	// - Decompressor/Heater converters
	Process
	{
		name = Thaw Ammonia
		title = Thaw Ammonia
		Tag = RR
		modifier = _ThawNH3
		input = ElectricCharge@15
		input = LqdAmmonia@0.24
		output = Ammonia@221.47
	}
	Process
	{
		name = Thaw CarbonDioxide
		title = Thaw CarbonDioxide
		Tag = RR
		modifier = _ThawCO2
		input = ElectricCharge@15
		input = LqdCO2@0.38
		output = CarbonDioxide@225.58
	}
	Process
	{
		name = Thaw Hydrogen
		title = Thaw Hydrogen
		Tag = RR
		modifier = _ThawH2
		input = ElectricCharge@15
		input = LqdHydrogen@0.28
		output = Hydrogen@224.25
	}
	Process
	{
		name = Thaw Methane
		title = Thaw Methane
		Tag = RR
		modifier = _ThawCH4
		input = ElectricCharge@15
		input = LqdMethane@0.38
		output = Methane@223.88
	}
	Process
	{
		name = Thaw Nitrogen
		title = Thaw Nitrogen
		Tag = RR
		modifier = _ThawN2
		input = ElectricCharge@15
		input = LqdNitrogen@0.34
		output = Nitrogen@223.93
	}
	Process
	{
		name = Thaw Oxygen
		title = Thaw Oxygen
		Tag = RR
		modifier = _ThawO2
		input = ElectricCharge@15
		input = LqdOxygen@0.28
		output = Oxygen@226.95
	}
}

// Define pseudo-resources used by proccess controllers
RESOURCE_DEFINITION
{
	name = _AmmoniaBrew
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _AmmoniaToMono
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _CarbonExtractor
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _CarbonFuser
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _SplitterAl2O3
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _SplitterCO2
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _SplitterH2O
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _SplitterHydrates
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _SplitterMona
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _SplitterSpod
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _FreezeCH4
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _FreezeCO2
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _FreezeH2
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _FreezeN2
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _FreezeNH3
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _FreezeO2
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _ThawCH4
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _ThawCO2
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _ThawH2
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _ThawN2
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _ThawNH3
	density = 0.0
	isVisible = false
}
RESOURCE_DEFINITION
{
	name = _ThawO2
	density = 0.0
	isVisible = false
}


// Preload Boxed Convert-O-Trons to match stock ISRU
@PART[rr_boxblue_long,rr_boxblue]
{
	!MODULE[ModuleResourceConverter],* {}
	!MODULE[ModuleOverheatDisplay] {}
	!MODULE[ModuleCoreHeat] {}
	MODULE
	{
		name = ProcessController
		resource = _WaterElectrolysis
		title = #KERBALISM_WaterElectrolysis_title//Water electrolysis
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _Sabatier
		title = #KERBALISM_SabatierProcess_title//Sabatier process
		capacity = 1
		valve_i = 2 // workaround until we have a better way to deal with dump valves
	}
	MODULE
	{
		name = ProcessController
		resource = _Haber
		title = #KERBALISM_HaberProcess_title//Haber process
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _WasteIncinerator
		title = Waste incinerator
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _WasteCompressor
		title = #KERBALISM_WasteCompressor_title//Waste compressor
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _Anthraquinone
		title = #KERBALISM_AnthraquinoneProcess_title//Anthraquinone process
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _HydrazineProduction
		title = #KERBALISM_HydrazineProduction_title//Hydrazine production
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _NitroHydrazine
		title = #KERBALISM_HydrazineProductionN2_title//Hydrazine production N2
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _MRE
		title = #KERBALISM_MoltenRegolithElectrolysis_title//MRE
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _SOE
		title = #KERBALISM_SolidOxideElectrolysis_title//SOE
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _SCO
		title = #KERBALISM_SelectiveCatalyticOxidation_title//SCO
		capacity = 1
	}
	
	MODULE
	{
		name = Configure
		title = Chemical Plant
		slots = 2
		UPGRADES
		{
			UPGRADE
			{
				name__ = Upgrade-Slots
				techRequired__ = electronics
				slots = 0
			}
		}
		SETUP
		{
			name = Water Electrolysis
			desc = #KERBALISM_WaterElectrolysis_desc//Split <b>Water</b> into its <b>Hydrogen</b> and <b>Oxygen</b> components.
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _WaterElectrolysis
			}
		}
		SETUP
		{
			name = Sabatier Process
			desc = #KERBALISM_SabatierProcess_desc//<b>Hydrogen</b> and <b>CarbonDioxide</b> react with a nickel catalyst to produce <b>Water</b> and <b>LiquidFuel</b>.
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _Sabatier
			}
		}
		SETUP
		{
			name = Haber Process
			desc = #KERBALISM_HaberProcess_desc//Produce <b>Ammonia</b> by <b>Nitrogen</b> fixation.
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _Haber
			}
		}
		SETUP
		{
			name = Waste Incinerator
			desc = #KERBALISM_WasteIncinerator_desc//Produce <b>CarbonDioxide</b> and <b>Water</b> by combustion of <b>Waste</b> with <b>Oxygen</b>. Includes a small exhaust turbine generator. If needed <b>Water</b> will be vented to continue <b>CarbonDioxide</b> extraction.
			tech = precisionEngineering
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _WasteIncinerator
			}
		}
		SETUP
		{
			name = Waste Compressor
			desc = #KERBALISM_WasteCompressor_desc//Compact <b>Waste</b> to the density of <b>shielding material</b>.
			tech = precisionEngineering
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _WasteCompressor
			}
		}
		SETUP
		{
			name = Anthraquinone Process
			desc = #KERBALISM_AnthraquinoneProcess_desc//Synthesize <b>Oxidizer</b> using a redox of <b>Oxygen</b> and <b>Hydrogen</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _Anthraquinone
			}
		}
		SETUP
		{
			name = Hydrazine Production
			desc = #KERBALISM_HydrazineProduction_desc//<b>Oxidizer</b> and <b>Ammonia</b> react to produce <b>MonoPropellant</b>, <b>Oxygen</b> and <b>Water</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _HydrazineProduction
			}
		}
		SETUP
		{
			name = Hydrazine Production (N2 Injection)
			desc = #KERBALISM_HydrazineProductionN2_desc//<b>Oxidizer</b> and <b>Ammonia</b> with <b>Nitrogen</b> injection react to produce <b>MonoPropellant</b> and <b>Oxygen</b>.
			tech = experimentalScience
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _NitroHydrazine
			}
		}
		SETUP
		{
			name = Solid Oxide Electrolysis
			desc = #KERBALISM_SolidOxideElectrolysis_desc//Transform <b>CarbonDioxide</b> into <b>Oxygen</b> and <b>Shielding</b>.
			tech = experimentalScience
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _SOE
			}
		}
		SETUP
		{
			name = Molten Regolith Electrolysis
			desc = #KERBALISM_MoltenRegolithElectrolysis_desc//Extract <b>Oxygen</b>, <b>CarbonDioxide</b> and <b>Shielding</b> out of <b>Ore</b>. If needed <b>CarbonDioxide</b> and/or <b>Shielding</b> will be vented in order to continue the <b>Oxygen</b> extraction.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _MRE
			}
		}
		SETUP
		{
			name = Selective Catalytic Oxidation
			desc = #KERBALISM_SelectiveCatalyticOxidation_desc//<b>Ammonia</b> and <b>Oxygen</b> react with a hydrotalcite-like catalyst to produce <b>Nitrogen</b> and <b>Water</b>.
			tech = experimentalScience
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _SCO
			}
		}
	}
	MODULE:NEEDS[FeatureReliability]
	{
		name = Reliability
		type = ProcessController
		title = #KERBALISM_ChemicalPlant_title//Chemical Plant
		repair = Engineer
		mtbf = 72576000
		extra_cost = 1.0
		extra_mass = 0.2
	}
}

// Load RR-specific chains into all recognized Convert-O-Trons
@PART[kerbalism-chemicalplant,MiniISRU,ISRU,rr_boxblue_long,rr_boxblue]
{
	MODULE
	{
		name = ProcessController
		resource = _MRER
		title = Molten Regolith Electrolysis (Rock)
		Tag = Sabe
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _AmmoniaBrew
		title = Ammonia Brewer
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _AmmoniaToMono
		title = Ammonia to MonoPropellant
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _CarbonExtractor
		title = Carbon Extractor
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _CarbonFuser
		title = Carbon Fuser
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _SplitterAl2O3
		title = Alumina Splitter
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _SplitterCO2
		title = Carbon Dioxide Splitter
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _SplitterH2O
		title = Water Splitter
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _SplitterHydrates
		title = Hydrates Splitter
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _SplitterMona
		title = Monazite Splitter
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _SplitterSpod
		title = Spodumene Splitter
		Tag = RR
		capacity = 1
	}

	@MODULE[Configure]
	{
		SETUP
		{
			name = Molten Regolith Electrolysis (Rock)
			desc = Extract <b>Oxygen</b>, <b>CarbonDioxide</b> and <b>Shielding</b> out of <b>Rock</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _MRER
			}
		}
		SETUP
		{
			name = Ammonia Brewer
			desc = Produce <b>LqdAmmonia</b> from <b>LqdHydrogen</b> and <b>LqdNitrogen</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _AmmoniaBrew
			}
		}
		SETUP
		{
			name = Ammonia to MonoPropellant
			desc = Convert <b>LqdAmmonia</b> into <b>MonoPropellant</b> and <b>LqdHydrogen</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _AmmoniaToMono
			}
		}
		SETUP
		{
			name = Carbon Extractor
			desc = Extract pure <b>Carbon</b> out of <b>Ore</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _CarbonExtractor
			}
		}
		SETUP
		{
			name = Carbon Fuser
			desc = Fuse <b>Carbon</b> and <b>Oxygen</b> into <b>CarbonDioxide</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _CarbonFuser
			}
		}
		SETUP
		{
			name = Splitter (Alumina)
			desc = Extract <b>Metal</b> and <b>Oxygen</b> out of <b>Alumina</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _SplitterAl2O3
			}
		}
		SETUP
		{
			name =  Splitter (CarbonDioxide)
			desc = Extract <b>Carbon</b> and <b>Oxygen</b> out of <b>CarbonDioxide</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _SplitterCO2
			}
		}
		SETUP
		{
			name = Splitter (Hydrates)
			desc = Extract <b>ArgonGas</b>, <b>MetalOre</b>, <b>Oxygen</b>, <b>Water</b> and <b>XenonGas</b> out of <b>Hydrates</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _SplitterHydrates
			}
		}
		SETUP
		{
			name = Splitter (Monazite)
			desc = Extract <b>Phosphorus</b>, <b>Oxygen</b> and <b>RareMetals</b> out of <b>Monazite</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _SplitterMona
			}
		}
		SETUP
		{
			name = Splitter (Spodumene)
			desc = Extract <b>Lithium</b>, <b>Metal</b> and <b>Silicates</b> out of <b>Spodumene</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _SplitterSpod
			}
		}
		SETUP
		{
			name = Splitter (Water)
			desc = Extract <b>Hydrogen</b> and <b>Oxygen</b> out of <b>Water</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _SplitterH2O
			}
		}
	}
}

// Load Boxed Compressor/Freezer
@PART[rr_boxblue_flat]
{
	MODULE
	{
		name = ProcessController
		resource = _FreezeCH4
		title = Methane Freezer
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _FreezeCO2
		title = CarbonDioxide Freezer
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _FreezeH2
		title = Hydrogen Freezer
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _FreezeN2
		title = Nitrogen Freezer
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _FreezeNH3
		title = Ammonia Freezer
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _FreezeO2
		title = Oxygen Freezer
		Tag = RR
		capacity = 1
	}
	
	MODULE
	{
		name = Configure
		title = Flash Freezer
		slots = 1
		UPGRADES
		{
			UPGRADE
			{
				name__ = Upgrade-Slots
				techRequired__ = electronics
				slots = 0
			}
		}
		
		SETUP
		{
			name = Ammonia Freezer
			desc = Freeze <b>Ammonia</b> into <b>LqdAmmonia</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FreezeNH3
			}
		}
		SETUP
		{
			name = Carbon Dioxide Freezer
			desc = Freeze <b>CarbonDioxide</b> into <b>LqdCO2</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FreezeCO2
			}
		}
		SETUP
		{
			name = Hydrogen Freezer
			desc = Freeze <b>Hydrogen</b> into <b>LqdHydrogen</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FreezeH2
			}
		}
		SETUP
		{
			name = Methane Freezer
			desc = Freeze <b>Methane</b> into <b>LqdMethane</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FreezeCH4
			}
		}
		SETUP
		{
			name = Nitrogen Freezer
			desc = Freeze <b>Nitrogen</b> into <b>LqdNitrogen</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FreezeN2
			}
		}
		SETUP
		{
			name = Oxygen Freezer
			desc = Freeze <b>Oxygen</b> into <b>LqdOxygen</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FreezeO2
			}
		}
	}
}

// Load Boxed Decompressor/Heater
@PART[rr_boxred_flat]
{
	MODULE
	{
		name = ProcessController
		resource = _ThawCH4
		title = Methane Heater
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _ThawCO2
		title = CarbonDioxide Heater
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _ThawH2
		title = Hydrogen Heater
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _ThawN2
		title = Nitrogen Heater
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _ThawNH3
		title = Ammonia Heater
		Tag = RR
		capacity = 1
	}
	MODULE
	{
		name = ProcessController
		resource = _ThawO2
		title = Oxygen Heater
		Tag = RR
		capacity = 1
	}
	
	MODULE
	{
		name = Configure
		title = Quick Heater
		slots = 1
		UPGRADES
		{
			UPGRADE
			{
				name__ = Upgrade-Slots
				techRequired__ = electronics
				slots = 0
			}
		}
		SETUP
		{
			name = Ammonia Heater
			desc = Thaw <b>LqdAmmonia</b> into <b>Ammonia</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _ThawNH3
			}
		}
		SETUP
		{
			name = Carbon Dioxide Heater
			desc = Thaw <b>LqdCO2</b> into <b>CarbonDioxide</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _ThawCO2
			}
		}
		SETUP
		{
			name = Hydrogen Heater
			desc = Thaw <b>LqdHydrogen</b> into <b>Hydrogen</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _ThawH2
			}
		}
		SETUP
		{
			name = Methane Heater
			desc = Thaw <b>LqdMethane</b> into <b>Methane</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _ThawCH4
			}
		}
		SETUP
		{
			name = Nitrogen Heater
			desc = Thaw <b>LqdNitrogen</b> into <b>Nitrogen</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _ThawN2
			}
		}
		SETUP
		{
			name = Oxygen Heater
			desc = Thaw <b>LqdOxygen</b> into <b>Oxygen</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _ThawO2
			}
		}
	}
}

// Scale capacities of installed modules
@PART[MiniISRU]:NEEDS[ProfileDefault]:AFTER[KerbalismDefault]
{
	@MODULE[ProcessController]:HAS[#Tag[RR]],*
	{
		@capacity *= 0.4 // 36.0 on Kerbalism's own capacity scale
	}
	@MODULE[ProcessController]:HAS[#Tag[Sabe]],*
	{
		@capacity *= 36
	}
}
@PART[ISRU]:NEEDS[ProfileDefault]:AFTER[KerbalismDefault]
{
	@MODULE[ProcessController]:HAS[#Tag[Sabe]],*
	{
		@capacity *= 90
	}
	// @MODULE[ProcessController]:HAS[#Tag[RR]],*
	// {
		// @capacity *= 1 // 90.0 on Kerbalism's own capacity scale; don't need to touch this
	// }
}
@PART[kerbalism-chemicalplant]:NEEDS[ProfileDefault]:AFTER[KerbalismDefault]
{
	@MODULE[ProcessController]:HAS[#Tag[RR]],*
	{
		@capacity *= 0.05 // 2.0 on Kerbalism's own capacity scale
	}
	@MODULE[ProcessController]:HAS[#Tag[Sabe]],*
	{
		@capacity *= 2
	}
}
@PART[rr_boxblue_long]:NEEDS[ProfileDefault]:AFTER[KerbalismDefault]
{
	@MODULE[ProcessController]:HAS[~Tag[*]],*
	{
		@capacity *= 90
	}
	@MODULE[ProcessController]:HAS[#Tag[Sabe]],*
	{
		@capacity *= 90
	}
	// @MODULE[ProcessController]:HAS[#Tag[RR]],*
	// {
		// @capacity *= 1
	// }
}
@PART[rr_boxblue]:NEEDS[ProfileDefault]:AFTER[KerbalismDefault]
{
	@MODULE[ProcessController]:HAS[#Tag[Sabe]],*
	{
		@capacity *= 54 // 0.6x the stock ISRU using Kerbalism's own capacity scale
	}
	@MODULE[ProcessController]:HAS[~Tag[*]],*
	{
		@capacity *= 54 // 0.6x the stock ISRU using Kerbalism's own capacity scale
	}
	@MODULE[ProcessController]:HAS[#Tag[RR]],*
	{
		@capacity *= 0.6
	}
	@MODULE[Configure]:HAS[#title[Chemical?Plant]]
	{
		%slots = 1
	}
}